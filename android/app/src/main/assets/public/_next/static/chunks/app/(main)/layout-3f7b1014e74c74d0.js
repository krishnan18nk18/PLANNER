(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2076],{3310:(e,t,s)=>{"use strict";s.d(t,{d:()=>n});var r=s(40662);class a extends r.EventEmitter{emit(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return super.emit(e,...s)}on(e,t){return super.on(e,t)}}let n=new a},13262:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var r=s(95155);let a={logo:e=>(0,r.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2Z"}),(0,r.jsx)("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7Z"})]})}},23769:(e,t,s)=>{"use strict";s.d(t,{G:()=>l});var r=s(12115),a=s(35317),n=s(90178),o=s(3310),i=s(40610);function l(e){let{db:t}=(0,n.jt)(),[s,l]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!t||!e){l(null),c(!1);return}let s=(0,a.rJ)(t,e),r=(0,a.aQ)(s,e=>{l(e.docs.map(e=>({...e.data(),id:e.id}))),c(!1)},async e=>{let t=new i.$({path:s.path,operation:"list"});o.d.emit("permission-error",t),l(null),c(!1)});return()=>r()},[t,e]),{data:s,loading:d}}},27102:(e,t,s)=>{"use strict";s.d(t,{FirebaseClientProvider:()=>i});var r=s(95155),a=s(12115),n=s(90178),o=s(62863);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{i((0,o.AU)())},[]),(0,r.jsx)(n.R8,{services:s,children:t})}},30285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>l});var r=s(95155),a=s(12115),n=s(66634),o=s(74466),i=s(59434);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:s})),ref:t,...c})});d.displayName="Button"},40610:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});class r extends Error{constructor(e){super("FirestoreError: Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify({context:e},null,2))),this.name="FirestorePermissionError",this.context=e,Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},40821:(e,t,s)=>{Promise.resolve().then(s.bind(s,64790))},59434:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i,cn:()=>o});var r=s(52596),a=s(39688),n=s(83013);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return(0,n.GP)(new Date(e),t)}},62863:(e,t,s)=>{"use strict";s.d(t,{AU:()=>p,As:()=>i.As,Ge:()=>c.G,uN:()=>m,jt:()=>i.jt,Jd:()=>d});var r=s(23915),a=s(93004),n=s(35317);let o={apiKey:"AIzaSyCccz8RVoDdg9I2i3kFIXCHkXx64yFFirw",authDomain:"studio-6310172972-1b43c.firebaseapp.com",projectId:"studio-6310172972-1b43c",storageBucket:"studio-6310172972-1b43c.appspot.com",messagingSenderId:"310759519915",appId:"1:310759519915:web:a009e648a9162ba4b1e9ee"};s(27102);var i=s(90178),l=s(12115);function d(){let{auth:e}=(0,i.As)(),[t,s]=(0,l.useState)(null),[r,n]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{if(!e)return void n(!1);let t=(0,a.hg)(e,e=>{s(e),n(!1)});return()=>t()},[e]),{user:t,loading:r}}var c=s(23769),u=s(3310),f=s(40610);function m(e){let{db:t}=(0,i.jt)(),[s,r]=(0,l.useState)(null),[a,o]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{if(!t||!e){r(null),o(!1);return}let s=(0,n.H9)(t,e),a=(0,n.aQ)(s,e=>{e.exists()?r({...e.data(),id:e.id}):r(null),o(!1)},async e=>{let t=new f.$({path:s.path,operation:"get"});u.d.emit("permission-error",t),r(null),o(!1)});return()=>a()},[t,e]),{data:s,loading:a}}function p(){let e=function(){if(!o.apiKey)throw Error("Missing Firebase config: NEXT_PUBLIC_FIREBASE_API_KEY");return o}(),t=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)(e),s=(0,a.xI)(t),i=(0,n.aU)(t);return{app:t,auth:s,db:i}}},64790:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var r=s(95155),a=s(6874),n=s.n(a),o=s(35695),i=s(10469),l=s(93223),d=s(74601),c=s(51920),u=s(36936),f=s(68027),m=s(51362),p=s(12115),h=s(85977),x=s(59434);let g=p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(h.bL,{ref:t,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});g.displayName=h.bL.displayName;let v=p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(h._V,{ref:t,className:(0,x.cn)("aspect-square h-full w-full",s),...a})});v.displayName=h._V.displayName;let b=p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(h.H4,{ref:t,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});b.displayName=h.H4.displayName;var y=s(89615),j=s(73158),N=s(10518),w=s(70154);let S=y.bL,_=y.l9;y.YJ,y.ZL,y.Pb,y.z6,p.forwardRef((e,t)=>{let{className:s,inset:a,children:n,...o}=e;return(0,r.jsxs)(y.ZP,{ref:t,className:(0,x.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...o,children:[n,(0,r.jsx)(j.A,{className:"ml-auto"})]})}).displayName=y.ZP.displayName,p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(y.G5,{ref:t,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=y.G5.displayName;let k=p.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...n}=e;return(0,r.jsx)(y.ZL,{children:(0,r.jsx)(y.UC,{ref:t,sideOffset:a,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});k.displayName=y.UC.displayName;let A=p.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(y.q7,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...n})});A.displayName=y.q7.displayName,p.forwardRef((e,t)=>{let{className:s,children:a,checked:n,...o}=e;return(0,r.jsxs)(y.H_,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(y.VF,{children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})}),a]})}).displayName=y.H_.displayName,p.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(y.hN,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(y.VF,{children:(0,r.jsx)(w.A,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=y.hN.displayName;let E=p.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(y.JU,{ref:t,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...n})});E.displayName=y.JU.displayName;let T=p.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(y.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});T.displayName=y.wv.displayName;var R=s(30285),O=s(62863),P=s(13262);let I=[{href:"/dashboard",icon:i.A,label:"Dashboard"},{href:"/tasks",icon:l.A,label:"Tasks"},{href:"/suggestions",icon:d.A,label:"Smart Suggestions"},{href:"/calendar",icon:c.A,label:"Calendar"}];function C(){var e,t;let s=(0,o.usePathname)(),{theme:a,setTheme:i}=(0,m.D)(),{user:l}=(0,O.Jd)(),{auth:d}=(0,O.As)(),c=(0,o.useRouter)(),p=async()=>{d&&(await d.signOut(),c.push("/login"))};return(0,r.jsxs)("header",{className:"sticky top-0 z-50 flex h-16 items-center gap-4 border-b bg-background/80 px-4 backdrop-blur-md sm:px-6",children:[(0,r.jsxs)(n(),{href:"/dashboard",className:"flex items-center gap-2 font-semibold text-lg",children:[(0,r.jsx)(P.F.logo,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("span",{className:"font-headline hidden sm:inline-block",children:"PlanVerse"})]}),(0,r.jsx)("nav",{className:"flex-1 flex justify-center items-center gap-2 sm:gap-4",children:I.map(e=>(0,r.jsx)(R.$,{variant:"ghost",asChild:!0,className:(0,x.cn)("h-auto px-2 sm:px-4 py-2 text-sm sm:text-base",s.startsWith(e.href)?"bg-accent text-accent-foreground":"text-muted-foreground"),children:(0,r.jsxs)(n(),{href:e.href,className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2",children:[(0,r.jsx)(e.icon,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden sm:inline-block",children:e.label})]})},e.href))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(R.$,{variant:"ghost",size:"icon",onClick:()=>i("light"===a?"dark":"light"),className:"rounded-full w-10 h-10","aria-label":"Toggle theme",children:[(0,r.jsx)(u.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(f.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),(0,r.jsxs)(S,{children:[(0,r.jsx)(_,{asChild:!0,children:(0,r.jsx)(R.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,r.jsxs)(g,{className:"h-10 w-10 border-2 border-border",children:[(0,r.jsx)(v,{src:(null==l?void 0:l.photoURL)||"",alt:(null==l?void 0:l.displayName)||"User","data-ai-hint":"user avatar"}),(0,r.jsx)(b,{children:(null==l||null==(e=l.displayName)?void 0:e[0])||(null==l||null==(t=l.email)?void 0:t[0])||"U"})]})})}),(0,r.jsxs)(k,{align:"end",children:[(0,r.jsx)(E,{children:(null==l?void 0:l.displayName)||(null==l?void 0:l.email)}),(0,r.jsx)(T,{}),(0,r.jsx)(A,{children:"Settings"}),(0,r.jsx)(A,{children:"Support"}),(0,r.jsx)(T,{}),(0,r.jsx)(A,{className:"text-destructive focus:text-destructive-foreground focus:bg-destructive",onClick:p,children:"Logout"})]})]})]})]})}var D=s(50172);function z(e){let{children:t}=e,{user:s,loading:a}=(0,O.Jd)(),n=(0,o.useRouter)();return((0,p.useEffect)(()=>{a||s||n.replace("/login")},[s,a,n]),a)?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(D.A,{className:"h-12 w-12 animate-spin text-primary"})}):s?(0,r.jsxs)("div",{className:"flex min-h-screen w-full flex-col",children:[(0,r.jsx)(C,{}),(0,r.jsx)("main",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:t})]}):null}},87481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>f});var r=s(12115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},90178:(e,t,s)=>{"use strict";s.d(t,{As:()=>c,R8:()=>l,jt:()=>u});var r=s(95155),a=s(12115),n=s(3310),o=s(87481);let i=(0,a.createContext)(null);function l(e){let{children:t,services:s}=e,{toast:l}=(0,o.dj)();return(0,a.useEffect)(()=>{let e=e=>{console.error(e),l({variant:"destructive",title:"Permission Denied",description:"Your request was denied by security rules. Check console for details. Path: ".concat(e.context.path),duration:1e4})};return n.d.on("permission-error",e),()=>{n.d.off("permission-error",e)}},[l]),(0,r.jsx)(i.Provider,{value:s,children:t})}let d=()=>(0,a.useContext)(i),c=()=>{var e,t;return{auth:null!=(t=null==(e=d())?void 0:e.auth)?t:null}},u=()=>{var e,t;return{db:null!=(t=null==(e=d())?void 0:e.db)?t:null}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,6287,4053,1790,378,4998,3836,3513,8441,1684,7358],()=>t(40821)),_N_E=e.O()}]);